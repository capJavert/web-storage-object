(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.webStorageObject=f()}})(function(){var define,module,exports;return function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r}()({1:[function(require,module,exports){"use strict";var WebStorageObject=require("./WebStorageObject");var WebStorageEnum=require("./WebStorageEnum");var LocalStorageObject=function LocalStorageObject(target,key,overwrite){return new WebStorageObject(WebStorageEnum.localStorage,target,key,overwrite)};module.exports=LocalStorageObject},{"./WebStorageEnum":3,"./WebStorageObject":4}],2:[function(require,module,exports){"use strict";var WebStorageObject=require("./WebStorageObject");var WebStorageEnum=require("./WebStorageEnum");var SessionStorageObject=function SessionStorageObject(target,key,overwrite){return new WebStorageObject(WebStorageEnum.sessionStorage,target,key,overwrite)};module.exports=SessionStorageObject},{"./WebStorageEnum":3,"./WebStorageObject":4}],3:[function(require,module,exports){"use strict";var WebStorageEnum=Object.freeze({localStorage:"localStorage",sessionStorage:"sessionStorage"});module.exports=WebStorageEnum},{}],4:[function(require,module,exports){"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}var WebStorageEnum=require("./WebStorageEnum");var WebStorageObject=function WebStorageObject(type,target,key,overwrite){if(overwrite==null){overwrite=true}var handler=this._handler(key);if(!handler._setStorage(type)){throw"WebStorage type is not valid or supported."}if(overwrite===true||handler._fetch()===null){handler._persist(target)}else{target=handler._fetch()}var proxy=new Proxy(target,handler);handler._proxy=proxy;if(window){window.addEventListener("storage",function(){handler._reflect()})}return proxy};WebStorageObject.prototype._handler=function(key){return{_id:key||this._uuid(),_proxy:null,_storage:null,get:function get(target,key){switch(key){case"toJSON":return this.toJSON.bind(this);case"toPlain":return this.toPlain.bind(this);case"toString":return target.toString;case"toLocaleString":return target.toLocaleString;case"hasOwnProperty":target=this._fetch();return target.hasOwnProperty;default:target=this._fetch();if(_typeof(target[key])==="object"){return new WebStorageProperty(target[key],key,this._proxy)}else{return target.hasOwnProperty(key)?target[key]:null}}},set:function set(target,key,value){target[key]=value;var temp=this._fetch();temp[key]=value;return this._persist(temp)},deleteProperty:function deleteProperty(target,key){if(key in target){delete target[key];return this._persist(target)}else{return false}},_uuid:function _uuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=Math.random()*16|0,v=c==="x"?r:r&3|8;return v.toString(16)})},_persist:function _persist(value){if(value){this._storage.setItem(this._id,JSON.stringify(value));return true}else{return false}},_fetch:function _fetch(){var temp=this._storage.getItem(this._id);return temp?JSON.parse(temp):null},_setStorage:function _setStorage(type){switch(type){case WebStorageEnum.localStorage:this._storage=localStorage;return true;case WebStorageEnum.sessionStorage:this._storage=sessionStorage;return true}return false},_reflect:function _reflect(){var temp=this._fetch();for(var key in temp){this._proxy[key]=temp[key]}},toJSON:function toJSON(){return this._storage.getItem(this._id)||"{}"},toPlain:function toPlain(){return this._fetch()}}};var WebStorageProperty=function WebStorageProperty(target,key,parent){var handler=this._handler(key,parent);var proxy=new Proxy(target,handler);handler._proxy=proxy;return proxy};WebStorageProperty.prototype._handler=function(key,parent){return{_id:key,_proxy:null,_parent:parent,get:function get(target,key){switch(key){case"toJSON":return function(){return JSON.stringify(target)};case"toPlain":return function(){return target};case"toString":return target.toString;case"toLocaleString":return target.toLocaleString;case"hasOwnProperty":return target.hasOwnProperty;default:if(_typeof(target[key])==="object"){return new WebStorageProperty(target[key],key,this._proxy)}else{return target.hasOwnProperty(key)?target[key]:null}}},set:function set(target,key,value){target[key]=value;this._parent[this._id]=target;return true},deleteProperty:function deleteProperty(target,key){if(key in target){delete target[key];this._parent[this._id]=target;return true}else{return false}},toJSON:function toJSON(){return JSON.stringify(this)},toPlain:function toPlain(){return this}}};module.exports=WebStorageObject},{"./WebStorageEnum":3}],5:[function(require,module,exports){"use strict";var LocalStorageObject=require("./LocalStorageObject");var SessionStorageObject=require("./SessionStorageObject");module.exports={LocalStorageObject:LocalStorageObject,SessionStorageObject:SessionStorageObject}},{"./LocalStorageObject":1,"./SessionStorageObject":2}]},{},[5])(5)});
